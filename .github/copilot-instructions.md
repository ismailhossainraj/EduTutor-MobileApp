<!-- Copilot / AI agent instructions for EduTutor-MobileApp -->
# EduTutor-MobileApp — AI Coding Assistant Notes

This file is a concise, actionable guide for AI coding agents contributing to the EduTutor-MobileApp Flutter repository. It focuses on repository-specific architecture, important patterns, and developer workflows you must follow to be productive.

1) Big picture
- Flutter multi-platform app (Android, iOS, web, Windows) located at project root with platform folders: `android/`, `ios/`, `web/`, `windows/`.
- Firebase backend: Firestore + Firebase Auth integrated via `lib/firebase_options.dart` (generated by FlutterFire CLI). App initialization is in `lib/main.dart`.
- UI is primarily under `lib/screens/` (example: `lib/screens/student/student_dashboard_screen.dart`). Models live in `lib/models/` (e.g., `TuitionModel`, `EnrollmentModel`).

2) Data model & Firestore patterns (critical)
- Primary collections observed: `tuitions`, `tuition_selections`, `enrollments`, `users`.
- Status fields used frequently: `open`, `selected`, `enrolled`, `interested`. Search these when changing business logic.
- Transactions: The app uses Firestore transactions when selecting a tuition to ensure atomic update of `tuitions` and creation of `tuition_selections` (see `student_dashboard_screen.dart`). Preserve this transaction pattern for concurrency-sensitive changes.
- Duplication for convenience: selection docs copy summary fields (studentName, studentEmail, subject, days, startTime, endTime). When changing these shapes update all code that reads the selection documents.
- Id patterns: some selection document IDs are composed as `${tuitionUid}_${studentUid}`. Keep this convention if you add lookup code.

3) Navigation & routes
- Centralized routes are defined in `lib/routes/app_routes.dart` and used across screens (e.g., `AppRoutes.studentPayments`). Prefer updating `AppRoutes` rather than updating hardcoded `MaterialPageRoute` strings.

4) Coding conventions & architecture hints
- UI uses StatefulWidgets and `setState` throughout screens (simple local state). If introducing state management, integrate with existing `provider` usage (see `lib/main.dart` where `AuthProvider` is provided).
- Use `TuitionModel.fromMap(...)` and other model constructors rather than ad-hoc Map parsing where available.
- Keep Firebase read/write shapes consistent (especially `createdAt`, which uses `FieldValue.serverTimestamp()` in several places).

5) Developer workflows (commands you can run)
- Install packages: `flutter pub get`
- Run on connected device/emulator: `flutter run -d <deviceId>`
- Build Android APK: `flutter build apk`
- Build iOS: `flutter build ios` (requires macOS / Xcode)
- Android-specific release: `cd android; .\gradlew assembleRelease` (Windows PowerShell)
- Format code: `flutter format .`

6) Firebase and environment
- `lib/firebase_options.dart` is generated by FlutterFire CLI and contains project keys. To reconfigure Firebase, run `flutterfire configure` locally and regenerate `firebase_options.dart`.
- Email/password auth reauthentication flows are implemented (see `Change Password` code path in `student_dashboard_screen.dart`); ensure Firebase Auth email/password provider is enabled on the project before testing those features.

7) Testing & CI
- There are no dedicated test suites in the repository root. If you add tests, follow `flutter_test` usage and update CI accordingly.

8) Where to look first when debugging or changing behavior
- `lib/screens/student/student_dashboard_screen.dart` — complex UI + Firestore usage (transactions, selection logic, filters). A frequent change target.
- `lib/main.dart` and `lib/firebase_options.dart` — app init and Firebase options.
- `pubspec.yaml` — dependency versions and third-party packages (e.g., `firebase_core`, `cloud_firestore`, `firebase_auth`, `provider`).

9) Safety notes for agents
- Do not remove or rename Firestore collections or change document key conventions without updating all callers (UI, transactions, server/cloud functions).
- Preserve transaction semantics when modifying the selection flow to avoid race conditions.
- When adding or changing public API keys or credentials, prefer documenting the change rather than silently modifying `firebase_options.dart` — this file is intentionally committed here.

10) Quick actionable examples
- To find where `tuitions` are read/updated: search for `collection('tuitions')` (used in `student_dashboard_screen.dart` for both find and enroll flows).
- To add a new route: update `lib/routes/app_routes.dart` and wire it into relevant `Navigator.pushNamed` calls.

If something in this file is unclear or you want me to expand an area (e.g., CI, code style, or adding example unit tests), tell me which section and I'll iterate.
